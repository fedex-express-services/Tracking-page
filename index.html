<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FedEx Tracking Portal</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: 'Source Sans Pro', Arial, sans-serif; }
    .fedex-button { background: #4D148C; color: white; padding: 0.75rem 1.5rem; border-radius: 0.5rem; }
    .modal-backdrop { backdrop-filter: blur(4px); background-color: rgba(0, 0, 0, 0.4); }
    .modal-content { max-width: 90%; }
    .page-section { display: none; }
    .active { display: block; }
  </style>
</head>
<body class="bg-gray-100 min-h-screen">

<!-- Header -->
<header class="bg-white shadow p-4 flex justify-between items-center">
  <div class="text-2xl font-bold text-purple-800 cursor-pointer" onclick="showPage('main')">FedEx</div>
  <nav class="space-x-4">
    <button onclick="showPage('main')">Track</button>
    <button onclick="showModal('support-modal')">Support</button>
  </nav>
</header>

<!-- Main Section -->
<div id="main" class="page-section active p-4 max-w-xl mx-auto mt-8">
  <h1 class="text-3xl mb-4 font-semibold">Track Your Package</h1>
  <form id="track-form" class="space-y-2">
    <input type="text" id="tracking-number" placeholder="Enter tracking number" class="w-full p-2 border rounded" required>
    <button type="submit" class="fedex-button w-full">Track</button>
  </form>
</div>

<!-- Tracking Modal -->
<div id="tracking-modal" class="fixed inset-0 hidden items-center justify-center modal-backdrop z-50">
  <div class="bg-white rounded-lg p-6 shadow-xl modal-content w-full max-w-lg relative">
    <button class="absolute top-4 right-4 text-2xl" onclick="closeModal('tracking-modal')">&times;</button>
    <h2 class="text-2xl mb-4 font-semibold text-purple-800">Tracking Details</h2>
    <div id="tracking-content" class="space-y-2 text-sm text-gray-800"></div>
    <div id="tracking-history" class="mt-6"></div>
    <div class="flex flex-wrap gap-2 mt-6">
      <button id="download-pdf" class="fedex-button flex items-center gap-2"><i class="fas fa-file-pdf"></i> Download PDF</button>
      <button id="print-label" class="fedex-button flex items-center gap-2"><i class="fas fa-print"></i> Print Label</button>
      <button id="email-updates" class="border px-4 py-2 rounded">Request Email Updates</button>
    </div>
  </div>
</div>

<!-- Support Modal -->
<div id="support-modal" class="fixed inset-0 hidden items-center justify-center modal-backdrop z-50">
  <div class="bg-white rounded-lg p-6 shadow-xl modal-content w-full max-w-md relative">
    <button class="absolute top-4 right-4 text-2xl" onclick="closeModal('support-modal')">&times;</button>
    <h2 class="text-2xl mb-4 font-semibold text-purple-800">Customer Support</h2>
    <p class="text-sm text-gray-700">For assistance, contact us at: <br/><strong>fedexpressdeliveryservices231@gmail.com</strong></p>
  </div>
</div>

<!-- JavaScript -->
<script>
  let currentTracking = '';
  let currentData = null;

  // Simulated database for tracking numbers
  const mockDB = {
    'FD26031998KR': {
      status: 'Awaiting Clearance',
      location: 'Paris International Depot',
      eta: 'Pending',
      from: 'FedEx Office Paris',
      to: 'Conway, SC 29527, USA',
      service: 'International Priority',
      history: [
        { date: '2025-06-20 08:00', location: 'Paris, France', status: 'Arrived at International Depot' },
        { date: '2025-06-19 17:00', location: 'Lyon, France', status: 'Departed Facility' },
        { date: '2025-06-18 14:30', location: 'Lyon, France', status: 'Shipment Received' }
      ]
    },
    'FD123456789US': {
      status: 'In Transit',
      location: 'Memphis, TN, USA',
      eta: '2025-06-24',
      from: 'FedEx Office New York',
      to: 'Los Angeles, CA 90001, USA',
      service: 'Overnight',
      history: [
        { date: '2025-06-21 21:15', location: 'Memphis, TN', status: 'Arrived at Sorting Facility' },
        { date: '2025-06-21 13:00', location: 'New York, NY', status: 'Departed Facility' },
        { date: '2025-06-21 09:30', location: 'New York, NY', status: 'Shipment Received' }
      ]
    },
    'FD987654321UK': {
      status: 'Delivered',
      location: 'London, UK',
      eta: '2025-06-20',
      from: 'FedEx Office Manchester',
      to: 'London, UK',
      service: '2-Day',
      history: [
        { date: '2025-06-20 16:05', location: 'London, UK', status: 'Delivered - Signed by J.SMITH' },
        { date: '2025-06-20 10:00', location: 'London, UK', status: 'Out for Delivery' },
        { date: '2025-06-19 12:30', location: 'Manchester, UK', status: 'Departed Facility' }
      ]
    }
  };

  function showPage(id) {
    document.querySelectorAll('.page-section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function showModal(id) {
    document.getElementById(id).classList.remove('hidden');
    document.getElementById(id).classList.add('flex');
  }

  function closeModal(id) {
    document.getElementById(id).classList.add('hidden');
    document.getElementById(id).classList.remove('flex');
  }

  // Tracking form submit handler
  document.getElementById('track-form').addEventListener('submit', e => {
    e.preventDefault();
    const num = document.getElementById('tracking-number').value.toUpperCase().replace(/\s+/g, '');
    currentTracking = num;
    currentData = mockDB[num] || null;
    const container = document.getElementById('tracking-content');
    const historyContainer = document.getElementById('tracking-history');
    if (currentData) {
      container.innerHTML = `
        <p><strong>Tracking #:</strong> <span class="text-purple-800">${num}</span></p>
        <p><strong>Status:</strong> ${currentData.status}</p>
        <p><strong>Current Location:</strong> ${currentData.location}</p>
        <p><strong>Estimated Delivery:</strong> ${currentData.eta}</p>
        <p><strong>From:</strong> ${currentData.from}</p>
        <p><strong>To:</strong> ${currentData.to}</p>
        <p><strong>Service:</strong> ${currentData.service}</p>
      `;
      // Show tracking history
      let histHTML = `<div><strong>Tracking History</strong><div class="mt-2 border rounded">
        <table class="w-full text-xs">
          <thead><tr class="bg-gray-100"><th class="p-2">Date/Time</th><th>Location</th><th>Status</th></tr></thead>
          <tbody>
      `;
      currentData.history.forEach(h => {
        histHTML += `<tr>
          <td class="p-2">${h.date}</td>
          <td>${h.location}</td>
          <td>${h.status}</td>
        </tr>`;
      });
      histHTML += '</tbody></table></div></div>';
      historyContainer.innerHTML = histHTML;
    } else {
      container.innerHTML = '<p class="text-red-600">Tracking number not found. Please check and try again.</p>';
      historyContainer.innerHTML = '';
    }
    showModal('tracking-modal');
  });

  // PDF and label download
  document.getElementById('download-pdf').onclick = function() {
    if (!currentData) return;
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    doc.setFont("helvetica", "bold");
    doc.setFontSize(16);
    doc.text("FedEx Shipment Receipt", 20, 20);
    doc.setFont("helvetica", "normal");
    doc.setFontSize(12);
    doc.text(`Tracking Number: ${currentTracking}`, 20, 40);
    doc.text(`Status: ${currentData.status}`, 20, 55);
    doc.text(`From: ${currentData.from}`, 20, 70);
    doc.text(`To: ${currentData.to}`, 20, 85);
    doc.text(`Service: ${currentData.service}`, 20, 100);
    doc.text(`Date: ${new Date().toLocaleString()}`, 20, 115);
    doc.text("History:", 20, 130);
    let y = 140;
    currentData.history.forEach(h => {
      doc.text(`${h.date}, ${h.location} - ${h.status}`, 25, y);
      y += 10;
    });
    doc.save(`fedex-receipt-${currentTracking}.pdf`);
  };

  document.getElementById('print-label').onclick = function() {
    if (!currentData) return;
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF({ unit: 'pt', format: 'a6' });
    doc.setFillColor("#4D148C");
    doc.rect(0, 0, 420, 50, 'F');
    doc.setTextColor(255, 255, 255);
    doc.setFontSize(18);
    doc.text("FedEx Express", 20, 30);
    doc.setTextColor(0, 0, 0);
    doc.setFontSize(12);
    doc.text(`Tracking #: ${currentTracking}`, 20, 70);
    doc.text(`Service: ${currentData.service}`, 20, 85);
    doc.text(`Status: ${currentData.status}`, 20, 100);
    doc.text(`From: ${currentData.from}`, 20, 115);
    doc.text(`To: ${currentData.to}`, 20, 130);
    doc.text("Date: " + new Date().toLocaleDateString(), 20, 150);
    doc.setFontSize(10);
    doc.setTextColor(120, 0, 0);
    doc.text("[APPROVED - OFFICIAL SEAL]", 20, 170);
    doc.save(`fedex-label-${currentTracking}.pdf`);
  };

  document.getElementById('email-updates').onclick = function() {
    if (!currentData) return;
    showNotification('Email update request submitted successfully.', 'success');
  };

  function showNotification(msg, type) {
    const note = document.createElement('div');
    note.textContent = msg;
    note.className = `fixed top-4 right-4 p-3 rounded bg-green-600 text-white shadow-md z-50`;
    document.body.append(note);
    setTimeout(() => note.remove(), 3000);
  }
</script>

</body>
</html>